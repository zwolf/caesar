
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#configuring-caesar-via-the-web-ui" class="toc-h2 toc-link" data-title="Introduction">Configuring Caesar via the Web UI</a>
                  </li>
                  <li>
                    <a href="#configuring-caesar-via-the-api" class="toc-h2 toc-link" data-title="Introduction">Configuring Caesar via the API</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#how-to-do-swap" class="toc-h1 toc-link" data-title="How to do SWAP">How to do SWAP</a>
          </li>
          <li>
            <a href="#extracts" class="toc-h1 toc-link" data-title="Extracts">Extracts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-extracts" class="toc-h2 toc-link" data-title="Extracts">Get extracts</a>
                  </li>
                  <li>
                    <a href="#create-amp-update-extracts" class="toc-h2 toc-link" data-title="Extracts">Create &amp; update extracts</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rules" class="toc-h1 toc-link" data-title="Rules">Rules</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#conditions" class="toc-h2 toc-link" data-title="Rules">Conditions</a>
                  </li>
                  <li>
                    <a href="#effects" class="toc-h2 toc-link" data-title="Rules">Effects</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/zooniverse/caesar/tree/master/docs/source/'>Modify documentation</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Caesar listens to classification events for workflows from the event stream.
You need to let Caesar know to listen to this workflow and it has to be a
workflow you have access to in zooniverse.org.</p>

<p>There are two ways to configure Caesar, manually via the UI or programmatically the API.
E.g. with a Zooniverse.org workflow id = 1234</p>
<h2 id='configuring-caesar-via-the-web-ui'>Configuring Caesar via the Web UI</h2>
<ul>
<li>Visit https://caesar.zooniverse.org/ and login.</li>
<li>Then navigate to https://caesar.zooniverse.org/workflows/new?id=1234 and click enable</li>
<li>Use the UI to configure your rules and effects as per the <a href="#rules">rules</a> &amp; <a href="#effects">effects</a> docs.</li>
</ul>
<h2 id='configuring-caesar-via-the-api'>Configuring Caesar via the API</h2>
<ol>
<li>Create a workflow

<ul>
<li>POST JSON request to <code>https://caesar.zooniverse.org/workflows/?id=1234</code></li>
</ul></li>
<li>Update the workflow with a configuration object payload (see <a href="docs/rules.md#rules">rules</a> &amp; <a href="docs/effects.md">effects</a>)

<ul>
<li>PUT JSON request to <code>/workflows/1234</code> with payload
<code>
{
&quot;extractors_config&quot;: { },
&quot;reducers_config&quot;: { }
&quot;rules_config&quot;: [
{
&quot;if&quot;: [&quot;gte&quot;, [&quot;lookup&quot;, &quot;survey-total-VHCL&quot;], [&quot;const&quot;, 1]],
&quot;then&quot;: [{&quot;action&quot;: &quot;retire_subject&quot;}]
}
]
}
</code></li>
</ul></li>
</ol>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authenticate, use an OAuth bearer token obtained from Panoptes:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: Bearer xyz"</span>
</code></pre>
<p>Caesar uses the same OAuth bearer token as Panoptes to allow access to the API. By default any data relating to a workflow is only accessible to project owners and collaborators.</p>

<p>Caesar expects for the bearer token to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>Authorization: Bearer xyz</code></p>

<aside class="notice">
You must replace <code>xyz</code> with your personal API key.
</aside>
<h1 id='how-to-do-swap'>How to do SWAP</h1>
<blockquote>
<p>In Panoptes, set <code>workflow.configuration</code> to something like:</p>
</blockquote>
<pre class="highlight plaintext"><code>{"subject_set_chances": {"EXPERT_SET_ID": 0}}
</code></pre>
<blockquote>
<p>In Caesar, set the workflow like so:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"extractors_config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"who"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"swap"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"external"</span><span class="p">,</span><span class="w"> </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://darryls-server.com"</span><span class="p">}</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="err">OPTIONAL</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"reducers_config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"swap"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"external"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"count"</span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="s2">"rules_config"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="s2">"if"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">RULES</span><span class="p">],</span><span class="w"> </span><span class="s2">"then"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"retire_subject"</span><span class="p">}]}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When you detect an expert user, update their probabilities like this:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/api/project_preferences/update_settings?project_id=PROJECT_ID&amp;user_id=USER_ID</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">panoptes-staging.zooniverse.org</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer TOKEN</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.api+json; version=1</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"project_preferences"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"designator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"subject_set_chances"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"WORKFLOW_ID"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"SUBJECT_SET_ID"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>And store expert-seenness in Caesar so that you can use it in the rulse</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/workflows/WORKFLOW_ID/reducers/REDUCER_KEY/reductions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">caesar-staging.zooniverse.org</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer TOKEN</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"likelyhood"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.864</span><span class="p">,</span><span class="w">
  </span><span class="s2">"seen_by_expert"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This document is a reference to the current state of affairs on doing SWAP on
the Panoptes platform (by which we mean the Panoptes API, Caesar, and
Designator).</p>

<p>To do SWAP, one must:</p>

<ol>
<li><p><strong>Track the confusion matrix of users</strong>. We currently expect this to be done
by some entity outside the Panoptes platform. This could be a script that
runs periodically on someone&#39;s laptop, or it can be an external webservice
that gets classifications streamed to it in real-time by Caesar (this is what
Darryl is doing). We don&#39;t currently have a good place to store the confusion
matrix itself inside the Panoptes platform. But, if the matrix identifies an
expert classifier, post that into Panoptes under the <code>project_preferences</code>
resource (API calls explained in later section)</p></li>
<li><p><strong>Calculate the likelyhood of subjects</strong>. This is done in the same place that
also calculates the confusion matrices. The resulting likelyhood should be
posted into Caesar as a <code>reduction</code>.</p></li>
<li><p><strong>Retire subjects when we know the answer</strong>. By posting the likelyhood into Caesar,
we can set rules on it. For instance:</p>

<ul>
<li><code>IF likelyhood &lt; 0.1 AND classifications_count &gt; 5 THEN retire()</code></li>
<li><code>IF likelyhood &gt; 0.9 AND classifications_count &gt; 5 THEN retire()</code></li>
<li><code>IF likelyhood &gt; 0.1 AND likelyhood &lt; 0.9 AND not seen_by_expert AND classifications &gt; 10 THEN move to expert_set</code></li>
</ul></li>
<li><p>When Caesar moves subjects into an expert-only subject set, Designator can then serve subjects from that set only to users marked as experts by the <code>project_preferences</code>. Designator is all about serving subjects from sets with specific chances, which means that we avoid the situation where experts only ever see the really hard subjects by mixing e.g. 50% hard images with 50% &quot;general population&quot;.</p></li>
</ol>
<h1 id='extracts'>Extracts</h1><h2 id='get-extracts'>Get extracts</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/workflows/$WORKFLOW_ID/extractors/$EXTRACTOR_KEY/extracts?subject_id=$SUBJECT_ID</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer $TOKEN</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"classification_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-16T15:51:13.544Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"classification_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">54376560</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-16T20:37:39.124Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"extractor_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">411083</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subject_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">458033</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-16T20:37:39.124Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">108</span><span class="p">,</span><span class="w">
        </span><span class="s2">"workflow_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4084</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Extracts are pieces of information relating to a specific classification (and therefore to a specific subject as well).</p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>WORKFLOW_ID</td>
<td>null</td>
<td><strong>Required</strong> &middot; Specifies which workflow</td>
</tr>
<tr>
<td>SUBJECT_ID</td>
<td>null</td>
<td><strong>Required</strong> &middot; Specifies which subject</td>
</tr>
<tr>
<td>EXTRACTOR_KEY</td>
<td>null</td>
<td><strong>Required</strong> &middot; Specifies which extractor to fetch extracts from.</td>
</tr>
</tbody></table>
<h2 id='create-amp-update-extracts'>Create &amp; update extracts</h2>
<p>Inserting and updating extracts happens through one and the same API endpoint, which performs an &quot;upsert&quot;.</p>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/workflows/$WORKFLOW_ID/extractors/$EXTRACTOR_KEY/extracts</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer $TOKEN</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"subject_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">458033</span><span class="p">,</span><span class="w">
    </span><span class="s2">"classification_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-16T15:51:13.544Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"classification_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">54376560</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">108</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"PENGUIN"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"POLARBEAR"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='body-fields'>Body fields</h3>
<p>The request body should be encoded as a JSON with the following fields:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subject_id</td>
<td>null</td>
<td><strong>Required</strong> &middot; Specifies which subject this extract is about</td>
</tr>
<tr>
<td>classification_id</td>
<td>null</td>
<td><strong>Required</strong> &middot; Specifies which classification this extract is about.<br>May be omitted if known to be an update rather than a create.</td>
</tr>
<tr>
<td>classification_at</td>
<td>null</td>
<td><strong>Required</strong> &middot; Specifies what time the classification happened. This is used to sort extracts by classification time when reducing them.<br>May be omitted if known to be an update rather than a create.</td>
</tr>
<tr>
<td>user_id</td>
<td>null</td>
<td>User that made the classification. <code>null</code> signifies anonymous.</td>
</tr>
</tbody></table>
<h1 id='rules'>Rules</h1><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"extractors"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"reducers"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="s2">"if"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"gte"</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">"lookup"</span><span class="p">,</span><span class="w"> </span><span class="s2">"survey-total-VHCL"</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="s2">"const"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]],</span><span class="w">
          </span><span class="s2">"then"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"retire_subject"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flagged"</span><span class="p">}]</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A workflow can configure an array of rules. Each rule has a condition (<code>if</code>) and an array of effects (<code>then</code>) that happen when that condition evaluates to true. Conditions can be nested to achieve complicated if statements.</p>
<h2 id='conditions'>Conditions</h2>
<p>The condition is a single operation, but some types of operations can be nested. The general syntax is like if you&#39;d write Lisp in JSON. It&#39;s always an array with as the first item a string identifying the operator. The other values are operations in themselves: <code>[operator, arg1, arg2, ...]</code>.</p>

<ul>
<li><code>[&quot;lt&quot;, operation, operation, ...]</code> - Performs numerical comparison. You can specify more than two arguments, and it will evaluate as <code>a &lt; b &lt; c &lt; d</code>.</li>
<li><code>[&quot;lte&quot;, operation, operation, ...]</code> - Performs numerical comparison. You can specify more than two arguments, and it will evaluate as <code>a &lt;= b &lt;= c &lt;= d</code>.</li>
<li><code>[&quot;gt&quot;, operation, operation, ...]</code> - Performs numerical comparison. You can specify more than two arguments, and it will evaluate as <code>a &gt; b &gt; c &gt; d</code>.</li>
<li><code>[&quot;gte&quot;, operation, operation, ...]</code> - Performs numerical comparison. You can specify more than two arguments, and it will evaluate as <code>a &gt;= b &gt;= c &gt;= d</code>.</li>
<li><code>[&quot;eq&quot;, operation, operation, ...]</code> - Performs numerical comparison. You can specify more than two arguments, and it will evaluate as <code>a == b == c == d</code>.</li>
<li><code>[&quot;const&quot;, value]</code> - Always returns the configured value.</li>
<li><code>[&quot;lookup&quot;, key]</code> - Look up a reduction value by the given key.</li>
<li><code>[&quot;not&quot;, operation]</code> - Negates the operation</li>
<li><code>[&quot;and&quot;, operation, operation, ...]</code> - Returns true if all of the given operations evaluate to logical true</li>
<li><code>[&quot;or&quot;, operation, operation, ...]</code> - Returns true if any of the given operations evaluates to logical true</li>
</ul>
<h2 id='effects'>Effects</h2>
<p>Currently there are only a few valid effects that can be run after matching a rule,
they are defined in this <a href="https://github.com/zooniverse/caesar/blob/master/app/models/effects.rb">code</a>.</p>

<table><thead>
<tr>
<th>Effect Key</th>
<th>Effect Code</th>
</tr>
</thead><tbody>
<tr>
<td><code>retire_subject</code></td>
<td><a href="https://github.com/zooniverse/caesar/blob/master/app/models/effects/retire_subject.rb">Effects::RetireSubject</a></td>
</tr>
<tr>
<td><code>add_subject_to_set</code></td>
<td><a href="https://github.com/zooniverse/caesar/blob/master/app/models/effects/add_subject_to_set.rb">Effects::AddSubjectToSet</a></td>
</tr>
<tr>
<td><code>add_subject_to_collection</code></td>
<td><a href="https://github.com/zooniverse/caesar/blob/master/app/models/effects/add_subject_to_collection.rb">Effects::AddSubjectToCollection</a></td>
</tr>
</tbody></table>

<p>See the <a href="#rules">rules</a> documentation to learn how to wire rules and effects up.</p>
<h1 id='errors'>Errors</h1>
<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files...just save them to the `includes` folder and add them to the top of your `index.md`'s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request sucks.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
          </div>
      </div>
    </div>
  </body>
</html>
